(function(window,undefined){var VaultHealper=window.VaultSDK;VaultHealper.listen=function(){if(arguments.length==1){callAPI(arguments[0])}else{callAPI(arguments[0],arguments[1])}};VaultHealper.saveBrowserInfo=function(){if(arguments.length>0){setBrowserInfo(arguments[0])}else{setBrowserInfo()}};VaultHealper.savePageInfo=function(pageUrl){VaultHealper.cookie.write("page_url",pageUrl,1,window.location.hostname,null)};VaultHealper.getSubleadId=function(){return VaultHealper.cookie.read("sub_lead_id")};function callAPI(){var transactionId=VaultHealper.cookie.read("transaction_id");if(transactionId.indexOf("&goal_id")!==-1){transactionId=transactionId.split("&goal_id")[0]}var goalId=0,additionalMacros="";if(arguments.length==1){goalId=arguments[0]}else{goalId=arguments[0];function logMapElements(value,key,map){additionalMacros+="&"+key+"="+value}arguments[1].forEach(logMapElements)}if(goalId==0){goalId=VaultHealper.cookie.read("goal_id")}var postBack=VaultHealper.cookie.read("vlt_cu")+CONFIG.get("TRANSACTION_MACRO")+transactionId;if(goalId){if(typeof goalId==="string"){}else{postBack=postBack+CONFIG.get("GOAL_MACRO")+goalId}}if(additionalMacros){postBack=postBack+additionalMacros}var xhr=createCORSRequest("GET",postBack);xhr.onload=function(){if(xhr.status===200){}else if(xhr.status!==200){}};if(transactionId){xhr.send()}}function createCORSRequest(method,url){var xhr=new XMLHttpRequest;if("withCredentials"in xhr){xhr.open(method,url,true)}else if(typeof XDomainRequest!="undefined"){xhr=new XDomainRequest;xhr.open(method,url)}else{xhr=null}return xhr}function setBrowserInfo(){var sesSionId=getParameterByName("sess_id");var source=getParameterByName("utm_source");var transaction="";if(arguments.length>0){transaction=getParameterByName(arguments[0])}else{transaction=getParameterByName("v_st_transid")}var goalId=getParameterByName("goal_id");var vtlCuUrl=getParameterByName("vltcu");var vltCuMain=decode(vtlCuUrl);if(transaction){var date=new Date;var sessionId="UNL_"+source+"_"+Math.floor(Math.random()*1e3)+date.getTime();VaultHealper.cookie.write("session_id",sessionId,1,window.location.hostname,null);VaultHealper.cookie.write("utm_source",source,1,window.location.hostname,null);VaultHealper.cookie.write("transaction_id",transaction,1,window.location.hostname,null);VaultHealper.cookie.write("goal_id",goalId,1,window.location.hostname,null);VaultHealper.cookie.write("vlt_cu",vltCuMain,1,window.location.hostname,null)}setSessionBrowserInfo()}function getParameterByName(name){var url_string=document.URL;var url=new URL(url_string);if(url.searchParams){var value=url.searchParams.get(name)}else{var value=""}return value}function setSessionBrowserInfo(){callAPI(0)}function getSessionBrowserInfo(clietnID){return sessionStorage.getItem(clietnID)}function decode(vltcu){decodedString=atob(vltcu);return decodedString}var checkCanSessionStorage=function(){var mod="modernizr";try{sessionStorage.setItem(mod,mod);sessionStorage.removeItem(mod);return true}catch(e){return false}};var checkCookieWritable=function(domain){try{document.cookie="cookietest=1"+(domain?"; domain="+domain:"");var ret=document.cookie.indexOf("cookietest=")!=-1;document.cookie="cookietest=1; expires=Thu, 19-Jan-2018 00:00:01 GMT"+(domain?"; domain="+domain:"");return ret}catch(e){return false}};VaultHealper.cookie={write:function(name,value,days,domain,path){var date=new Date;days=days;path=path||"/";date.setTime(date.getTime()+days*24*60*60*1e3);var expires="; expires="+date.toGMTString();var cookieValue=name+"="+value+expires+"; path="+path;if(domain){cookieValue+="; domain="+domain}document.cookie=cookieValue},read:function(c_name){var allCookie=""+document.cookie;var index=allCookie.indexOf(c_name);if(c_name===undefined||c_name===""||index===-1)return"";var ind1=allCookie.indexOf(";",index);if(ind1==-1)ind1=allCookie.length;return unescape(allCookie.substring(index+c_name.length+1,ind1))},remove:function(name){if(this.read(name)){this.write(name,"",-1,"/")}}};var CONFIG=function(){var private={TRANSACTION_MACRO:"transaction_id=",GOAL_MACRO:"&goal_id="};return{get:function(name){return private[name]}}}()})(this);
